# --- Base de datos PostgreSQL ---
spring.datasource.url=jdbc:postgresql://localhost:5432/AgendaGym
spring.datasource.username=postgres
spring.datasource.password=Colombia1*
spring.datasource.driver-class-name=org.postgresql.Driver
spring.datasource.hikari.connection-timeout=30000
spring.datasource.hikari.maximum-pool-size=10

# JPA / Hibernate
spring.jpa.hibernate.ddl-auto=update
spring.jpa.open-in-view=false
spring.jpa.properties.hibernate.jdbc.lob.non_contextual_creation=true
spring.jpa.properties.hibernate.id.new_generator_mappings=true
spring.jpa.show-sql=true
spring.jpa.properties.hibernate.format_sql=true
spring.jpa.properties.hibernate.jdbc.time_zone=UTC

# --- Manejo de errores ---
error.handling.http-status-in-json-response=true
error.handling.exception-logging=NO_LOGGING
error.handling.full-stacktrace-http-status-http-statuses=5xx
error.handling.log-levels.5xx=ERROR
springdoc.pathsToMatch=/, /api/**

# --- Configuraci칩n de correo (usar variables de entorno) ---
# Preferible: exportar MAIL_HOST, MAIL_PORT, MAIL_USERNAME, MAIL_PASSWORD (no dejar credenciales en el repo)
spring.mail.host=${MAIL_HOST:smtp.mailtrap.io}
spring.mail.port=${MAIL_PORT:2525}
spring.mail.username=${MAIL_USERNAME:TU_MAILTRAP_USER}
spring.mail.password=${MAIL_PASSWORD:TU_MAILTRAP_PASSWORD}
spring.mail.protocol=${MAIL_PROTOCOL:smtp}
spring.mail.properties.mail.smtp.auth=true
spring.mail.properties.mail.smtp.starttls.enable=true
spring.mail.properties.mail.smtp.starttls.required=false
spring.mail.properties.mail.smtp.connectiontimeout=5000
spring.mail.properties.mail.smtp.timeout=5000
spring.mail.properties.mail.smtp.writetimeout=5000
spring.mail.test-connection=false

# Direcci칩n FROM que usar치 EmailService (por defecto toma spring.mail.username si MAIL_FROM no est치 definido)
app.mail.from=${MAIL_FROM:${spring.mail.username}}

# --- URL base para enlaces (ej. ngrok en desarrollo) ---
app.base.url=${APP_BASE_URL:https://754486c25296.ngrok-free.app

# Logging / debugging
logging.level.io.bootify.agenda_gym=DEBUG
logging.level.io.bootify.agenda_gym.service.VerificationService=DEBUG
logging.level.org.hibernate.SQL=DEBUG

# Hikari timezone
spring.datasource.hikari.connection-init-sql=SET TIME ZONE 'UTC'